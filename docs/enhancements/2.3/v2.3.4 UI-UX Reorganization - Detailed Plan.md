# Phase 4: UI/UX Reorganization - Detailed Plan

Building on **Phase 1's Memory System**, **Phase 2's Agent Architecture**, and **Phase 3's Operations Automation**, Phase 4 reorganizes the frontend to surface automation workflows, integrate BurpSuite Pro, and consolidate navigation into feature-grouped categories.

---

## Phase 4 Overview

**Objective:** Reorganize the RTPI frontend to reduce wasted user actions, integrate BurpSuite Pro into the surface assessment workflow, consolidate the Operations Manager into the Operations page as a floating chat window, and group sidebar navigation by feature.

**Duration Estimate:** 4-6 days

**Dependencies:**
- Phase 3 (Operations Management Automation) - pipeline status API for floating chat
- Existing Radix UI component library, TailwindCSS theme system
- `rtpi-burp-agent` Docker container (already defined in docker-compose)

---

## Current State Analysis

### Surface Assessment Overview Tab

**File:** `client/src/components/surface-assessment/OverviewTab.tsx`

Current layout (2-column grid on line 168):
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  TopVulnerableAssetsTable   â”‚       ActivityFeed           â”‚
â”‚  "Most Vulnerable Assets"   â”‚    "Recent Activity"         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

These two components are the **replacement targets** per the v2.3 roadmap. Above them sits a 3-column row:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SummaryStats   â”‚ SeverityDistribution â”‚ StatusDistribution   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Files involved:**
- `client/src/components/surface-assessment/TopVulnerableAssetsTable.tsx` (102 lines)
- `client/src/components/surface-assessment/ActivityFeed.tsx`

### Operations Manager (Standalone Page)

**File:** `client/src/pages/OperationsManager.tsx` (298 lines)

Current structure:
- Header with operation selector, hourly reporting toggle, "Trigger Now" button
- Stats grid: Active Reporters, Pending Questions, Recent Tasks
- Tabs: Reporters (grid of ReporterAgentCards), Questions (AssetQuestionCards), Timeline (placeholder)
- Route: `/operations-manager`

**Supporting components:**
- `client/src/components/operations-manager/ReporterAgentCard.tsx`
- `client/src/components/operations-manager/AssetQuestionCard.tsx`

**Hooks used:**
- `useReporterAgents()`, `useAssetQuestions()`, `useOperationsManagement()`

### Sidebar Navigation (Flat List)

**File:** `client/src/components/layout/Sidebar.tsx`

Current: 19 ungrouped nav items + 1 admin section:
```
Dashboard, Operations, Operations Manager, Targets, Vulnerabilities,
Surface Assessment, ATT&CK Framework, Agents, Empire C2, Agentic Implants,
Infrastructure, Ollama AI, Tools, Tool Registry, Tool Migration,
Reports, OffSec Team R&D, Settings, Profile
[Admin: User Management]
```

### Operations Page

**File:** `client/src/pages/Operations.tsx`

Current: Operation list with create/edit forms, bulk actions, workflow enrichment. No floating chat or Operations Manager integration.

### Existing Upload Patterns

**File:** `client/src/components/attack/StixImportDialog.tsx`
- File upload dialog with drag-and-drop, `.json` validation
- FormData upload to API endpoint
- Progress tracking (10%, 20%, 30%...)
- Success stats display
- **Reusable pattern** for BurpSuite upload component

---

## Step 4.1: BurpSuite Pro Upload Component

### Purpose

Replace `TopVulnerableAssetsTable` and `ActivityFeed` in the Surface Assessment Overview tab with a BurpSuite Pro `.jar` upload component that spans the full 2-column width.

### New Component

**File:** `client/src/components/surface-assessment/BurpSuiteUploadCard.tsx` (NEW)

```typescript
interface BurpSuiteUploadCardProps {
  operationId: string;
}

// Component features:
// 1. Drag-and-drop zone with dashed border
// 2. File input accepting .jar files only
// 3. File validation (name, size, extension)
// 4. Upload status display (filename, size)
// 5. "Embed BurpSuite" action button
// 6. Progress bar during embedding
// 7. Success confirmation state
// 8. Reset to initial state after completion
```

### Visual Layout

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  BurpSuite Pro Integration                              col-span-2  â”‚
â”‚  Upload BurpSuite Pro .jar file to embed into the application       â”‚
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚  â•­â”€â”€â”€â”€â•®                                                    â”‚      â”‚
â”‚  â”‚  â”‚ â˜ï¸ â”‚  Click to upload or drag and drop                 â”‚      â”‚
â”‚  â”‚  â•°â”€â”€â”€â”€â•¯                                                    â”‚      â”‚
â”‚  â”‚          JAR files only (BurpSuite Pro)                    â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                                      â”‚
â”‚  [After file selected:]                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚  âœ“  burpsuite_pro_v2024.1.jar  Â·  245.32 MB  [Embed BurpSuite] â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                                      â”‚
â”‚  [During embedding:]                                                 â”‚
â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  60%  Embedding BurpSuite Pro...      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Implementation Details

**Drag-and-drop handling:**
- `onDragOver`: Highlight border with `border-primary`
- `onDragLeave`: Reset border
- `onDrop`: Validate `.jar` extension, set file state
- Hidden `<input type="file" accept=".jar">` triggered by click

**Upload flow:**
1. User selects/drops `.jar` file
2. File info displayed (name, size in MB)
3. User clicks "Embed BurpSuite"
4. `POST /api/v1/burp-builder/embed` with FormData
5. Progress bar updates from upload progress events
6. Success state shows confirmation
7. Auto-reset after 2 seconds

**Reuse from StixImportDialog:** Follow the same FormData + progress pattern from `client/src/components/attack/StixImportDialog.tsx`.

**Styling:** Uses existing theme classes:
- `bg-card p-6 rounded-lg shadow-sm border border-border`
- `border-2 border-dashed border-border` for upload zone
- `bg-primary text-primary-foreground` for action button
- `bg-secondary` for file info display

### Backend API

**File:** `server/api/v1/burp-builder.ts` (already registered in server/index.ts)

Add endpoint if not present:
```
POST /api/v1/burp-builder/embed
  Content-Type: multipart/form-data
  Body: { file: .jar }
  Response: { success: boolean, message: string }
```

### Modify OverviewTab

**File:** `client/src/components/surface-assessment/OverviewTab.tsx` (MODIFY)

Replace lines 167-171:
```tsx
// BEFORE:
<div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
  <TopVulnerableAssetsTable assets={topAssets} />
  <ActivityFeed events={recentActivity} />
</div>

// AFTER:
<BurpSuiteUploadCard operationId={operationId} />
```

Remove imports for `TopVulnerableAssetsTable` and `ActivityFeed`.

---

## Step 4.2: Operations Manager Floating Chat Window

### Purpose

Per the v2.3 roadmap: "Integrate the 'Operations Manager' functions and features within the Operations Page â€” a floating 2x2" square chat window for user input."

The standalone `/operations-manager` page becomes a floating panel accessible from the Operations page.

### New Component

**File:** `client/src/components/operations/OpsManagerFloatingChat.tsx` (NEW)

```typescript
interface OpsManagerFloatingChatProps {
  operationId: string | null;
  isOpen: boolean;
  onToggle: () => void;
}

// Component structure:
// 1. Floating container (fixed position, bottom-right)
// 2. Toggle button (always visible) with notification badge
// 3. Expandable chat panel (2x2" ~ 200x200px minimum, resizable)
// 4. Operation context header
// 5. Message/question feed from reporters
// 6. Text input for operator responses
// 7. Quick action buttons (Trigger Scan, Enable Reporting)
```

### Visual Layout

**Collapsed state** (toggle button):
```
                                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                        â”‚ ğŸ¤–  (3) â”‚  â† bottom-right, notification count
                                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Expanded state** (floating panel):
```
                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â”‚ Operations Manager    â”€ â–¡ âœ•  â”‚
                            â”‚ Operation: Acme Pentest      â”‚
                            â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                            â”‚ ğŸ¤– 3 new targets discovered  â”‚
                            â”‚    from BBOT scan. Proceed   â”‚
                            â”‚    with nmap?                â”‚
                            â”‚                              â”‚
                            â”‚ âš ï¸ Critical vuln found on    â”‚
                            â”‚    192.168.1.50 (CVE-2024-  â”‚
                            â”‚    1234). Validate?          â”‚
                            â”‚                              â”‚
                            â”‚ [Trigger Scan] [View Details]â”‚
                            â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                            â”‚ Type a response...    [Send] â”‚
                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Implementation Details

**Positioning:**
```css
.ops-manager-float {
  position: fixed;
  bottom: 1.5rem;    /* 24px */
  right: 1.5rem;     /* 24px */
  z-index: 50;
  width: 384px;       /* w-96 */
  max-height: 512px;  /* max-h-[512px] */
}
```

**Content sources (reusing existing hooks):**
- `useOperationsManagement(operationId)` â†’ stats, hourly reporting state
- `useAssetQuestions(operationId, 'pending')` â†’ pending questions
- `useReporterAgents()` â†’ active reporter count

**Trigger behavior (from roadmap):**
- Chat activates when operation is submitted, switched to "Active", and confirmed by human
- Auto-opens when pipeline dispatches a question
- Shows pipeline status from Phase 3's `operations.pipelineStatus`
- Quick actions: Trigger Surface Assessment, Enable Hourly Reporting, Answer Question

**Question/Response flow:**
1. Reporter agents submit questions â†’ appear in chat feed
2. Operator types response in input field
3. Submit calls `answerQuestion(questionId, answer)` from `useAssetQuestions`
4. Optionally generates task from response

**Notification badge:**
- Shows count of pending questions from `useAssetQuestions`
- Pulses animation when new questions arrive
- Clears when all questions are answered or dismissed

### Modify Operations Page

**File:** `client/src/pages/Operations.tsx` (MODIFY)

Add floating chat component:
```tsx
import OpsManagerFloatingChat from '@/components/operations/OpsManagerFloatingChat';

// Inside the component:
const [chatOpen, setChatOpen] = useState(false);
const [selectedOperationId, setSelectedOperationId] = useState<string | null>(null);

// In JSX, after the main content:
<OpsManagerFloatingChat
  operationId={selectedOperationId}
  isOpen={chatOpen}
  onToggle={() => setChatOpen(!chatOpen)}
/>
```

### Route Changes

**File:** `client/src/pages/App.tsx` (MODIFY)

The `/operations-manager` route should remain functional but redirect to `/operations` with the chat open, to prevent broken links:
```tsx
// Keep existing route but redirect
<Route path="/operations-manager">
  <Redirect to="/operations?chat=open" />
</Route>
```

Or keep the standalone page as-is for users who prefer the full-page view. The roadmap says "incorporated into" not "replace entirely."

---

## Step 4.3: Sidebar Navigation Reorganization

### Purpose

Per the v2.3 roadmap: "Group Side-Panel Objects Based on Features and Nature." The current flat list of 19 items is reorganized into logical feature groups with section headers.

### Current â†’ Proposed Navigation

```
CURRENT (flat list):              PROPOSED (grouped):
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Dashboard                         Dashboard
Operations
Operations Manager                â”€â”€ OPERATIONS â”€â”€
Targets                           Operations
Vulnerabilities                   Targets
Surface Assessment                Vulnerabilities
ATT&CK Framework                  Surface Assessment
Agents
Empire C2                         â”€â”€ INTELLIGENCE â”€â”€
Agentic Implants                  ATT&CK Framework
Infrastructure                    Reports
Ollama AI                         OffSec Team R&D
Tools
Tool Registry                     â”€â”€ AUTOMATION â”€â”€
Tool Migration                    Agents
Reports                           Empire C2
OffSec Team R&D                   Agentic Implants
Settings                          Ollama AI
Profile
                                  â”€â”€ TOOLS â”€â”€
[Admin: User Management]          Tools
                                  Tool Registry
                                  Tool Migration

                                  â”€â”€ INFRASTRUCTURE â”€â”€
                                  Infrastructure

                                  â”€â”€ SETTINGS â”€â”€
                                  Settings
                                  Profile

                                  [Admin: User Management]
```

### Implementation

**File:** `client/src/components/layout/Sidebar.tsx` (MODIFY)

Replace flat `navItems` array with grouped structure:

```typescript
interface NavGroup {
  label: string;          // Section header text
  items: NavItem[];
}

interface NavItem {
  path: string;
  label: string;
  icon: LucideIcon;
}

const navGroups: NavGroup[] = [
  {
    label: "",  // No header for Dashboard (top-level)
    items: [
      { path: "/", label: "Dashboard", icon: LayoutDashboard },
    ],
  },
  {
    label: "Operations",
    items: [
      { path: "/operations", label: "Operations", icon: ListTodo },
      { path: "/targets", label: "Targets", icon: Target },
      { path: "/vulnerabilities", label: "Vulnerabilities", icon: AlertTriangle },
      { path: "/surface-assessment", label: "Surface Assessment", icon: BarChart3 },
    ],
  },
  {
    label: "Intelligence",
    items: [
      { path: "/attack", label: "ATT&CK Framework", icon: Shield },
      { path: "/reports", label: "Reports", icon: FileText },
      { path: "/offsec-rd", label: "OffSec Team R&D", icon: Microscope },
    ],
  },
  {
    label: "Automation",
    items: [
      { path: "/agents", label: "Agents", icon: Bot },
      { path: "/empire", label: "Empire C2", icon: Crown },
      { path: "/implants", label: "Agentic Implants", icon: Cpu },
      { path: "/ollama", label: "Ollama AI", icon: Brain },
    ],
  },
  {
    label: "Tools",
    items: [
      { path: "/tools", label: "Tools", icon: Wrench },
      { path: "/tool-registry", label: "Tool Registry", icon: Package },
      { path: "/tool-migration", label: "Tool Migration", icon: Download },
    ],
  },
  {
    label: "Infrastructure",
    items: [
      { path: "/infrastructure", label: "Infrastructure", icon: Server },
    ],
  },
  {
    label: "Settings",
    items: [
      { path: "/settings", label: "Settings", icon: Settings },
      { path: "/profile", label: "Profile", icon: User },
    ],
  },
];
```

**Section headers rendering:**

```tsx
{navGroups.map((group) => (
  <div key={group.label}>
    {group.label && !isCollapsed && (
      <div className="pt-4 pb-2 px-4">
        <p className="text-xs font-semibold text-muted-foreground uppercase tracking-wider">
          {group.label}
        </p>
      </div>
    )}
    {isCollapsed && group.label && (
      <div className="pt-2 pb-1 flex justify-center">
        <div className="w-6 border-t border-border" />
      </div>
    )}
    {group.items.map((item) => (
      // ... existing Link rendering code
    ))}
  </div>
))}
```

**Collapsed mode:** Section headers become thin horizontal dividers to save space.

### Operations Manager Nav Item Removal

The "Operations Manager" nav item at `{ path: "/operations-manager", ... }` is **removed from the sidebar** since it's now integrated into the Operations page as a floating chat. The route stays alive for backwards compatibility.

### Verification Checklist (from roadmap - REQUIRED)

The roadmap mandates checking all routes 3 times:
1. After each sidebar change is made
2. After the full sidebar reorganization is complete
3. After all pages have been consolidated

**Verification method:** Iterate through all `navGroups` items programmatically and confirm each `path` matches a route in `App.tsx`.

---

## Step 4.4: ATT&CK Framework UI Tweaks

### Per v2.3 Roadmap

1. **Move Tactic Agent List to First Tab** - Reorder tabs in ATT&CK page
2. **STIX Upload - Single-Click** - Currently requires double-click; change to single-click upload
3. **Auto-push STIX data** to ATT&CK Workbench DB after upload

### Files

**File:** `client/src/pages/AttackFramework.tsx` (MODIFY)
- Reorder `TabsTrigger` elements to place "Tactics" first

**File:** `client/src/components/attack/StixImportDialog.tsx` (MODIFY)
- Change double-click trigger to single-click
- Add auto-push to Workbench DB after successful import

---

## Deliverables

### New Files (2)

```
client/src/components/surface-assessment/BurpSuiteUploadCard.tsx
client/src/components/operations/OpsManagerFloatingChat.tsx
```

### Modified Files (6)

```
client/src/components/surface-assessment/OverviewTab.tsx    (replace TopVulnerableAssetsTable + ActivityFeed)
client/src/pages/Operations.tsx                             (add floating chat component)
client/src/components/layout/Sidebar.tsx                    (grouped navigation)
client/src/pages/AttackFramework.tsx                        (tab reorder)
client/src/components/attack/StixImportDialog.tsx           (single-click upload)
server/api/v1/burp-builder.ts                               (add embed endpoint if missing)
```

### Files Retained (not deleted)

```
client/src/components/surface-assessment/TopVulnerableAssetsTable.tsx  (remove import, keep file)
client/src/components/surface-assessment/ActivityFeed.tsx               (remove import, keep file)
client/src/pages/OperationsManager.tsx                                 (keep for standalone access)
```

---

## Integration with Phase 1, 2, and 3

### Phase 1 (Mem0 Memory System)

- Floating chat can display memory-enhanced context when answering questions
- Operator responses stored as memory entries (`memoryType: 'fact'`)
- No hard dependency â€” deferred until Phase 1 implementation

### Phase 2 (Agent System Architecture)

- Floating chat consumes `AgentMessage` protocol messages when Phase 2 message bus is active
- Reporter agents' reports rendered in chat feed
- Operations Manager synthesis summaries displayed in chat

### Phase 3 (Operations Management Automation)

- Floating chat displays `operations.pipelineStatus` as a progress indicator
- Pipeline events (`bbot_scan_completed`, `targets_auto_created`, etc.) appear as chat messages
- Quick actions in chat trigger Phase 3 pipeline steps (manual trigger, pause, resume)
- Auto-created targets count shown in chat notifications

### v2.4 Boundary

Phase 4 does NOT implement:
- SysReptor report embedding (v2.4 - Technical Writer Agent)
- ATT&CK Planner or Workbench embedding (separate effort)
- Flow Builder embedding (separate effort)
- ATLAS/OWASP/NIST framework pages (Phase 5)
- 3D Network Topology (Phase 7)

---

## Implementation Order (Baby Steps)

| Step | Task | Duration | Dependencies |
|------|------|----------|--------------|
| 1 | Create `BurpSuiteUploadCard.tsx` component | 2-3 hours | None |
| 2 | Modify `OverviewTab.tsx` to use BurpSuiteUploadCard | 30 min | Step 1 |
| 3 | Verify burp-builder API endpoint exists; add if missing | 1 hour | Step 1 |
| 4 | Create `OpsManagerFloatingChat.tsx` component | 3-4 hours | None |
| 5 | Add floating chat to `Operations.tsx` | 1 hour | Step 4 |
| 6 | Restructure `Sidebar.tsx` with grouped navigation | 2-3 hours | None |
| 7 | Remove "Operations Manager" from sidebar nav | 15 min | Steps 5, 6 |
| 8 | Route verification (3 passes per roadmap requirement) | 1 hour | Steps 5, 6, 7 |
| 9 | ATT&CK tab reorder + STIX single-click fix | 1 hour | None |
| 10 | Integration testing (all pages, all routes, all links) | 2 hours | All |

Steps 1-3, 4-5, 6-7, and 9 can be parallelized.

---

## Success Criteria

- [ ] Surface Assessment Overview tab shows BurpSuite upload card in place of "Most Vulnerable Assets" and "Recent Activity"
- [ ] `.jar` file upload works with drag-and-drop and file picker
- [ ] Upload sends file to backend API with progress tracking
- [ ] Operations page has floating chat button in bottom-right corner
- [ ] Floating chat shows pending questions from reporter agents
- [ ] Operator can answer questions directly from the floating chat
- [ ] Chat auto-opens when pipeline dispatches a question
- [ ] Sidebar navigation is grouped into 7 sections with headers
- [ ] Section headers collapse to dividers when sidebar is collapsed
- [ ] All 19 navigation routes remain functional (NO BROKEN LINKS)
- [ ] `/operations-manager` route still works (redirect or standalone)
- [ ] ATT&CK "Tactics" tab is first in tab order
- [ ] STIX import triggers on single click (not double click)
- [ ] All existing page behaviors unchanged unless explicitly modified
- [ ] Dark mode works correctly with all new components

---

## Ready to Proceed?

This plan reorganizes the RTPI frontend to:
- **Reduce wasted actions** via the floating Operations Manager chat
- **Integrate BurpSuite Pro** into the surface assessment workflow
- **Improve navigation** with feature-grouped sidebar categories
- **Fix usability issues** in ATT&CK STIX upload

**Next Steps:**
1. Review this Phase 4 plan
2. Confirm scope and priorities
3. Toggle to Act mode to begin implementation

Phases 5-7 (Framework Integration, Reporting System, Topology & Visualization) will be planned in subsequent documents.
