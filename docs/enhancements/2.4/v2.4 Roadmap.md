# Meta-Instruction
Under each header are the things that need to be fixed or features that need to be created, as well as the conditions for success. This document serves as scaffolding for the complete plan which will be detailed by Claude in preparation. All implementation will document every step completed and follow a rigorous checklist, to prevent loss of development situational awareness.

If an Agent does not yet exist, create it and develop develop its necessary capabilities and workflow application routes. . 

Reporting Agents are not presented through the Operational UI, all Reporting Agents will be managed through the Administration page and deliver all output through the Operations Manager Agent. 

# Troubleshooting
- Review the images within the ts-img folder, "[issue-name]/image"
    - Utilize all agents and tools until the issue is completely repaired

# v2.5 Objective (Agentic Autonomy)
I'd like to create a plan dual-agency-system for the RTPI platform,  Identify were scaffolding for this exists, what scaffolding would be necessary, and how to bridge the gaps so that an operation can begin and finsih completely autonomously. 

Please ask any clarifying questions necessary.

# Operations

## Types
A Continuous Operation may simply be a contuous reconnaissance effort of scannign once per-day

an operation may last up to one week of continuous testing and retesting

An Operation is complete when a human confirms that the final report product is acceptible. 

# Agentic Systems
## System-1 (Autonomous Operation System): [Triggered when an Operation is approved and Confirmed by a Human] 
1. Operation Manager Agent - Sends operation number and details to review agent

2. Review Agent - Parses Operation data, Determines what tasks need to be created,sends task information to task agent

3. Task Agent -  Reviews task, determines how to delegate tasks 
- [Pass to Technical Operation System]

- [Receive from Technical Report Writer Agent]

4. QA Agent - Ensures objectives have been complete, reporting grammar is clear, concise, and free of spelling mistakes or gramatical errors. 

5. Reporting Agent - 

## System 2 - ( Technical Operation System)
[Receive from Autonomous Task Agent]

1. Operation Lead Agent - Utilizies rtpi-x tool containers

2. Technical Operator [Offsec R&D Agent] -  Utilizies rtpi-x tool containers to accomplish operational objectives
3. Technical Reviewer [Offsec R&D Agent] - Utilizes rtpi-x tool containers to validate findings and confirms 
    - includes a contrarian objective, seeking to debase the validity of a finding.
    - WILL CONCEDE CONTRARION OBJECTIVE AFTER A FINDING IS FULLY VALIDATED AS A TRUE POSITIVE.

4. Technical Report Writer Agent - Utilizes internal reporting for each task, utilizes Sysreptor API and LLM inference to write final report

[Pass to Autonomous Operation QA Agent] (Up to 3x Loop for optimal reporting)

---

# Enhancement Specifications

## v2.4.1 - Research Agent Tavily Integration
**File:** [v2.4.1-research-agent-tavily-integration.md](v2.4.1-research-agent-tavily-integration.md)

Deep vulnerability research via Tavily MCP when no known Metasploit module exists. The research-agent performs CVE discovery, PoC extraction, and exploit chain analysis, then routes findings to the maldev-agent for custom exploit development.

**Current state:** Basic Tavily REST API integration added to the Operation Lead phase alongside SearchSploit (runs every pentest workflow). The v2.4.1 enhancement extends this into a dedicated research-agent with multi-phase research pipeline and message bus integration.

## v2.4.2 - Maldev Agent Custom Exploit Development
**File:** [v2.4.2-maldev-agent-custom-exploit-development.md](v2.4.2-maldev-agent-custom-exploit-development.md)

Custom exploit crafting (Metasploit modules, Nuclei templates, reverse shell payloads) from vulnerability research. Targets Metasploit multi/handler for reverse shell delivery on network targets. Leverages the existing `rtpi-maldev-agent` container (44 security tool repos) and `nucleiTemplates` database table.

## Fixes Applied (Pre-v2.4)

The following bugs were fixed as prerequisites for the v2.4 workflow enhancements:

| Fix | File | Description |
|-----|------|-------------|
| Metasploit module path double-prefix | `agent-workflow-orchestrator.ts`, `metasploit-executor.ts` | AI prompt example caused `auxiliary/auxiliary/...` paths; added defensive sanitization |
| Report truncation at Low Severity | `agent-workflow-orchestrator.ts`, `ollama-ai-client.ts` | Technical Writer had 2048 max_tokens; increased to 16384 with truncation detection |
| Web Hacker Agent `cmd.join` crash | `web-hacker-agent.ts` | Docker exec called with wrong signature (string vs string[]) |
| Vulnerability Reporter Agent DB insert | `vulnerability-reporter-agent.ts` | Insert used non-existent columns; fixed to use `type`/`config` per schema |
| Session timeout too short | `server/auth/session.ts` | Cookie maxAge increased from 30 minutes to 24 hours |
| OffSec containers not starting | `docker-compose.yml` | Removed `profiles: offsec-agents` gate from all 7 containers |